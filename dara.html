<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
 font-family: amiri;
 src: url('res/amiri-regular.woff');
}
#pic{
	width:100%;
	}
#txt{
  font-family:amiri;
	font-size:40px;
	width:100%;
	text-align:center;
  direction:rtl;
  line-height:160%;
	}
a:hover{
	color:red;
	cursor:pointer;
	}
#bd{
	text-align:right;
  direction:rtl;
  line-height:150%;
  padding:10px;
	}
#ft{
  border:0px red solid;
  width:100%;
  text-align:left;
  direction:ltr;
  display:flex;
	}
#cp{
	height:40px;
	}
#cc{
  color:#fff;
  background-color:#00f;
  width:150px;
  height:150px;
  border-radius:75px;
  margin:20px;
	font-size:40px;
  line-height:170%;
  text-align: center;
 }
#ftb{
  width:100%;
  text-align:center;
  line-height:150%;
  position:fixed;
  bottom:4px;
  transition: bottom 0.3s;
	}
button{
  width:60px;
  height:40px;
  border-radius:4px;
  border:1px solid #aaa;
 }
button:hover{
  background:#ddd;
  }
.pressed{
  color:#f00;
  }
#dau{
  font-family:amiri;
	font-size:30px;
  line-height:30%;
  }
.red{
  color:#f00;
}
h2{
  font-family:arial;
	font-size:20px;
	width:100%;
	text-align:left;
  line-height:100%;
  margin-top:20px;
  margin-bottom:4px;
	}
.etxt{
  font-family:arial;
	font-size:18px;
	direction:ltr;
	text-align:left;
  line-height:100%;
	}
.cg{
  display: grid;
  grid-template-columns: auto auto auto auto;
}
.ce{
  border: 1px solid rgba(0, 0, 0, 0.1);
  text-align: center;
  line-height:160%;
  padding:10px;
}
	
@media screen and (orientation:landscape) {
	#pic{
		float:left;
		width:50%;
		}
	#txt{
		float:left;
		font-size:100px;
		width:50%;
    line-height:160%;
	  }
 .cc{
    color:#fff;
    background-color:#00f;
    width:200px;
    height:200px;
    border-radius:150px;
    margin:20px;
    font-size:60px;
    line-height:170%;
    text-align: center;
    }
 }
</style>
</head>
<body>
<div id=con>
<div id=pic>
<img id=imageid src="res/p01.jpg" onclick="load_page()" width=100%>
</div>

<div id=txt></div>
</div>
<div style="height:50px;"></div>
<div id=ftb>
<button id=more onclick="get_more()">
  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
</button>

<button onclick="gototoc()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"></path></svg>
 </button>
 <!--
 -->
 <button id=play onclick="play_lesson()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M8 5v14l11-7z"></path></svg>
 </button>
 <button onclick="prev()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
 </button>
 <button onclick="next()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"></path></svg>
 </button>
</div>

<script>
const la=[
 "nauerok||",
 "dar| dar dar dar|",
 "dara| dara dara dara|",
 "| dara dara # dar dar| d # a # r",
 "dar| dara dari di, # dari di dara.| dari+di # i",
 "dau| ui, ui, dau, # daui dara, dau.| dau # u",
 "dara| uere dereue, dara # uere, uere. # dara, uere dereue.| uere # e",
 "duu+dar| dara duu dari di # duu dar, # duu dari duur duur.| duu # uu",
 "uazi| zara, zara # uere uazi. # zuu uere, zuu.| zara # z",
 "do| dade, do, do. # uere dara, uere, # dade doi zore. # dei, zuu uere.| do # o",
 "~au| ~ai, ~ai, #doi dade ~aui zore. #~_oi, ~_oi, dara, #do ~aui ua zore.| ~au # ~_",
 "dade| dade, dade, # uere deri^. # ~eue ~azade, doi deui^. # ~_i^, ~_i^, dara. # dade ua di^.| deri^ # i^",
 "r^au| zerde, zerde ua r^aue, # dei, dei, # ua ~azad r^oi # ~_oi, zerde deuer^i^. # zerde dr^e, # zerde zor zor dr^e.| r^au # r^",
 "do+r^jaue|- ~azad, ~azad, uere juuri^, # ua doi dade r^jaue. # - ~_oi, ~eue duu r^oje der^ji^. # duu r^oje doi dade der^ji^.| juur # j",
 "zri_ze|- ~ai, ~euei zri_zei di_ue, # zri_zei ~azad? # - uere, uere, dara, # ~eu zri_ze zi_ue zri_zei ~azade? # ~ei, ~ei, ~eue zri_zei ~azade.| zri_ze # i_",
 "dari+dri^_j| zara, uere ~_i^_re, # ua ~eu dare dri^_je r^uuaue. # dei zara, zuu uere, # ~eu dare dri^_je ua r^uuaue.| dri^_j # i^_",
 "~audan| zara+u ~azad ua der^on, # ~aui ~eu duu dare deden. # ~eu duu dare zuu der^ui^_n, # zuu zuu ~au dedri^_n.| ~audan # n",
 "nazi^| daie ~eue n_euzade. # ua der^oi_n_e nau ~eu daran_e. # der^oin dar der^ui^_n_in. # ~_oi, nazi^, dar der^ui^_n_n? # diare ~_i^ue zor ~azan. # zuu uern_eue, zuu.| nazi^ # n_",
 "dar+der^ui^_n_m| - daie, ua ~em duu dare der^ui^_n_m, # duai ~eue, ~auian dedem, # - uere nazi^, uere, # ua der^oin, zuu uere # - ua di^_m daie, ua di^_m, # ~em duu dare der^ui^_n_m, # duai ~eue di^_m.| der^ui^_n_m # m",
 "m_er^e+zerd| ma, ma, ma, # mam_e, mam_e, # ~em_e m_er^e zerde, # m_er^e zerdi m_n. # m_n di^_m_eue mam_e. # ua der^om ~aui dedem, # duai ~eue di^_m_eue.| m_er^ # m_",
 "mi^uji+naiab| - ~emeie mi^uj, mi^uji naiab. # - mam zorab, mam zorab, # mer^o, mer^o, mi^ujm deui^. # - zuu uere zeineb, zuu, # dei uere, ~emeie mi^uji naiab.| zeineb # b",
 "b_eb_ei+zei_neb| zei_neb, uere, uere # mame b_eb_ei b_o narduui. # mame b_eb_ei b_o narduum? # b_ji daie, # b_ji bab_e, # b_ji mame.| bab_e # b_",
 "baran+debari^t| ~ai neuzad, ua baran debari^t. # ~em_r^o ~au zor debi^t. # be baran dar zuu der^ui^t. # bnuar^e mam zorab ua der^uat, # der^uat bo bazar^ mi^uj di^ni^t.| debari^t # t",
 "t_eiare| b_nuar^n, t_eiare, t_eiare. # t_eiarei uatan diue? # ua dei_beme nau ~eu darane. # ~euei zuu di_t_ieue, # deb_i^t_e t_eiarei ~eu. # ~azad t_o det_uani zuut_r b_idozi_t_eue?| t_eiare # t_",
 "us+be| us, us, dara, bnuar^e ~eu teirane # uis, uis, uis # ~ai, ~ai, ~azad, uere, # ~em teirane bere. # us+be dara, us, uazbi^ne, # bes ~euende ~azari teir bde.| us # s",
 "s_i^u| ~azad, s_i^ s_i^um bo berdeue. # r^aues_te nes_rin, ba berneb_meue, # ~i^s_ta s_i^ s_i^uan berdedemeue, # ~eue s_i^ui^, # ~eue duu s_i^u, # ~eue s_i^ si^u, # s_i^ui dit deui^? # bes_e, bes_e, nameui^.| s_i^u # s_",
 "r^ojbas^| r^ojbas^ babe. # r^ojbas^, nes_rin. # babe ~eue der^oi? # mnis^ b_i^_m? # nes_rin, ~i^sta bo ~is^ der^om # ~_i^uari^ duai ~is^ di^_meue, # ~eusa der^oin bo dereue.| r^ojbas^ # s^",
 "s^_uus^_e+s^_ir| bnuar^ne ~em s^_uus^_e s^_ire, # s^_iri mer^e zerdei mne, # s^_iri mer^e zerd s^_irine. # uern danis^_n, s^_uus^_ei uatan diue? # ~i^sta der^om dei_s^armeue, # deidem beuei b_idozi^_teue.| s^_uus^_e # s^_",
 "s^er^e+m_ris^k| ~ai babe, bnuar^e, # ua duu m_ris^k s^er^iane # duu m_ris^k uek iek ~azan, # ba tozi^k nisk b_bem boian # r^auestn, s^er^e denuuk bese. # ~i^sta nisk dedem be ~_i^ue.| m_ris^k # k",
 "k_eui+mn| daik_e, daik_e, # ua tutk_e suur+u k_eui mn iari dek_en. # k_ut, k_ut, tutk_e suur, # nek_ei ~azari k_eui mn bdei. # ~ai, ua k_eui mn tutk_e suuri r^auna, # k_eui mn k_eui^k_i ~azaie. # k_s^, k_s^, k_euek_e, bese uazb_i^ne.| k_eu # k_",
"iarii+top| nes_rin, ~eue iek top bo to. # tep, tep, tep. # ~ei top be mn nadei, babe? # neuzad, ~eues^ iek top bo to, bas^e? # bji babe, bji babe, # ~em_r^o duu t_i_p iari dekein, # duu deste iari be iek top dekein.| top # p",
"p_s^e+sp_i| p_s^e sp_i, p_s^, p_s^, p_s^. # miau, miau. # uere p_i^s^eue, mer^o. # ~em p_enir+u nane dedem be to. # miau, miau. # zuu uere, p_s^e sp_i, # to p_s^ei mni, netrsi.| p_s^e # p_",
"si^+seg| ~ai, neuzad uere. # ua si^ seg iek kerui^s^k r^au deni^n. # prs^ng bang bke, ua bo ~i^re di^n. # deng meke, ba bi^n. # prs^ng, prs^ng, uere seirke. # ua si^ seg iek kerui^s^k r^au deni^n. # zuuke, ua bo ~i^re di^n.| seg # g",
"kare+spi| g_di, g_di, kare spi # to mn nanasi? # g_iat dedem_i^ g_ia, netrsi # g_di, g_di, g_di # daie g_ian, kare spi bg_re. # r^eng_e br^uat, zuube. # kare spi, mer^o. # ~em g_iaie dedem be to.| g_ia # g_",
"mel| ~ai nesrin, bnuar^e mel. # ua be ~as_manda pol pol der^on. # ~eue iek pol. # ~eue duu pol. # neuzad, r^enge ~euane m_raui bn. # boie ua ml dri^j+u zl zl diarn.| mel # l",
 "bl_ui^r+l_i^dan| bezme, sema+u strane. # dei ~azad, bl_ui^r l_i^de seirane. # bl_ui^reke bas^ l_i^de g_iane. # l_em nau l_me sema+u strane. # bji ~azad, bo ~em bl_ui^r l_i^dane. # dei, dei, boman l_i^de g_iane.| l_m # l_",
 "h_i^lke| nesrin, bnuar^e ~em h_i^lkane, # ~em h_i^lke zerd+u suurane # dara g_ian, iek h_i^lkem bo b_h_i^ne # ua bot dehaui^jm bnuar^e. # h_ei, h_ei, nekei bi_haui^ji. # bas^e nai_haui^jm, netrsi. # h_er bji dara, h_er bji.| h_i^lke # h_",
 "~auazi+gul^| ho ho, kakei s^_ms^al^+jen g_ian, # ~auazi hei+gul^ li^+nadei boman? # ua be b_i^l^, gl^ hel^+dekenin, # nemami dar+gul^ der^ui^nin. # bas^e s^_ms^al^ li^+dedem botan, # ~_i^ues^ be b_i^l^, gl^ hel^+kenn, # nemami dar+gul^ br^ui^nn.| gul^ # l^",
 "kal^_ek| dara, dara. # bel^_i^ babe g_ian, bel^_i^. # uere, ~em kal^_eket bdem_i^, # be daikt bl^_i^, bot let bkat # tokl^_ekei bas^ pak bkat, # supast dekem babe, # bo ~em kal^_eke naiabe.| kal^_ek # l^_",
 "kotr+u+r^is^ol^e| teq, teq, teq. # nesrin, ~eu dergaie bkeue, # ua kotr+u r^is^ol^em bo to hi^naue, # supas, supas, babe g_ian, # hendi^ sl^q urdkem boian? # bel^i^, bel^i^, naskol^i^, # legel^ naner^eq boian dani^.| sl^q # q",
 "kel^ebab+u+qaz| kel^ebabe r^engine, # be qaim bq_uuq_i^ne, # ~eu qazane bbezi^ne. # dei, ~eue bo naq_uuq_i^ni. # ~eu qazane bbezi^ni? # qazekan, uern bq_ir^i^nn, # ~em kel^ebabe bbezi^nn. # q_i, q_i, q_i # q_uu, q_uu, q_uu. # ha, ha, qaim nebuu.| qaz # q_",
 "dilani^| gelaui^j g_ian, ~eue dilani^ dekei? # ~azad, ~ei to dilani^ nakei? # uere lam, mn pal^de, zuuke, # duai mn, tos^ dilani^ bke. # bas^e, ua hatm, bas^ dest bgri, # bo ~emla+u ~eula ner^uani, ba nekeui.| gelaui^j # la",
 "kef| ~of ~azad, ~of, # mn be tom gut, kur^i^ki bas^+be, # iari be kef meke, # tf leser zeui meke. # li^_m b_buure, daie g_ian, # lemeula iari be kef nakem, # tf leser zeui nakem.| kef # f",
 "f_r^f_r^oke| ~eha daie ~em f_r^f_r^okeie, # mn drustm krduue, seirke. # ~af_erin dara, b_i_hi^_ne. # f_ermuu daie g_ian, bnuar^e # ~af_erin, zor bas^e, # danis^e kf_tem bo li^naui, kf_te, # bot b_i^nm duani geure? # supas daie, iek kf_tem bese.| f_r^f_r^oke # f_"
 ];

const ca=[
 "|||",
 "~_|~au||10",
 "a|dar|A|1",
 "b|babe|B|21",
 "p|ps^e|P|31",
 "t|teiare|T|23",
 "c|co|J|1",
 "c^|c^alak|CH|1",
 "h^|h^lua||1",
 "x|xurma|KH|1",
 "d|dar|D|1",
 "r|dar|R|1",
 "r^|r^au||12",
 "z|zara|Z|8",
 "j|juur|ZH|13",
 "s|si^u|S|25",
 "s^|s^uus^e|SH|27",
 "`|`eles^is^||",
 "`^|||1",
 "f|||43",
 "v|||1",
 "q|||40",
 "k|||29",
 "g|||33",
 "l|||35",
 "l^|||37",
 "m|||19",
 "n|||17",
 "h_|||36",
 "e|||6",
 "u|||5",
 "uu|||7",
 "o|||9",
 "i|||4",
 "i^|||11",
 "la|||41",
 "l^a|||1"
 ];

const PAUSE="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#000000'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>";
const PLAY="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='currentColor'><path d='M0 0h24v24H0z' fill='none'></path><path d='M8 5v14l11-7z'></path></svg>";

var i=1;
var rd="t";
var red=0;
var qs=window.location.search;
qs=qs.replaceAll("?","");
var qsa=qs.split("&")
var qpa={};
for(j in qsa) {
  tqa=qsa[j].split("=");
  qpa[tqa[0]]=tqa[1]
  }
if("lesson" in qpa) {i=qpa["lesson"]; localStorage.setItem("DARA_LESSON_NO", i);}

if(localStorage.getItem("DARA_LESSON_NO")===null) localStorage.setItem("DARA_LESSON_NO", 1); else i=localStorage.getItem("DARA_LESSON_NO");
if(localStorage.getItem("DARA_LESSON_VOICE")===null) localStorage.setItem("DARA_LESSON_VOICE", rd); else rd=localStorage.getItem("DARA_LESSON_VOICE");
if(localStorage.getItem("DARA_LESSON_RED")===null) localStorage.setItem("DARA_LESSON_RED", red); else red=localStorage.getItem("DARA_LESSON_RED");


window.onload=load_page();

function ps(id){
  var aid="a"+id;
	// document.getElementById(aid).play();
  var audio = new Audio("res/"+rd+"/a"+id+".mp3");
  audio.play();
	}

function next(){
 if(i<la.length) i++;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 }
 
function prev(){
 if(i>0) i--;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 }

function get_more(){
  clearTimeout(timer);
  k=0;
  document.getElementById("play").innerHTML=PLAY;
  var dau=red==0?"داو":"دا<a class=red>و</a>";
  var hnw=`<button id=dau onclick="highlight()">${dau}</button`;
  var voice=rd=="t"?"<button class=red onclick=voice('t')>Tara</button> <button onclick=voice('y')>Yad</button>":"<button onclick=voice('t')>Tara</button> <button class=red onclick=voice('y')>Yad</button>";
  const t=`
<h2>Settings</h2>
<div class=etxt>
<table>
<tr valign=top>
<td>
Voice: </td><td align=right>${voice}</td>
</tr>
<tr>
<td>Hightlight New Letters: </td><td align=right>${hnw}</<td>
</tr>
</table>
</div>
<h2>Shortcuts</h2>
<div class=etxt>
Arrows: Next and previous lessons<br>
Numbers 1-9: Go to lesson<br>
Number 0: Contents<br>
p: Play lesson<br>
t: Tara voice<br>
y: Yad voice (now lesson 1 and 5)<br>
r: Red highlight of new letter<br>
l: Letters<br>
s: Settigs page<br>
b: Back to lesson (from settings)<br>
</div>
<h2>Credits</h2>
<div class=etxt>
Text entry: Yad<br>
Coding: Yad (with some help from dad!)<br>
Voice: Tara (10 years old in 1998) and Yad (8 years old in 2021)<br>
Animation: Karzan (12 years old in 1998)<br>
Audio recording and processing: Fadhil (1998)<br>
</div>
  `;
  document.getElementById("txt").innerHTML=t;
  }

function get_char_grid(){
  clearTimeout(timer);
  k=0;
  document.getElementById("play").innerHTML=PLAY;
  var t="<div class=cg>";
  for(j=1; j<ca.length; j++){
    cea=ca[j].split("|");
    cet=eng_to_kur(cea[0]);
    t+="<div class=ce><a onclick='goto("+cea[3]+")'>"+cet+"</a></div>";
    }
  t+="</div>"
  document.getElementById("imageid").src="res/p00.jpg";
  document.getElementById("txt").innerHTML=t;
  }

function load_page(){
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  document.getElementById("imageid").src="res/p" + i0 + ".jpg";
  var t=la[i];
  var ta=t.split("|");
  t=eng_to_kur(t);
  t=add_tags(t);
  if(i==0) t=toc();
  document.getElementById("txt").innerHTML=t;
  const fsa=[40,70,70,60,50,50];
  var fs=40;
  if(i>6) fs=fsa[0]; else fs=fsa[i];
  if(!is_mobile()) fs=fs*1.4;
  document.getElementById("txt").style.fontSize=fs+"px";
  if(i==1 || i==2) document.getElementById("bd").style.textAlign="center";
  if(i==3) {
    document.getElementById("cc").style.lineHeight="30%";
    document.getElementById("w0305").style.lineHeight="100%";
    document.getElementById("w0306").style.lineHeight="160%";
    document.getElementById("w0307").style.lineHeight="30%";
    }
  if(i==4) {
    document.getElementById("cc").style.lineHeight="40%";
    document.getElementById("w0407").style.lineHeight="250%";
    }
  }

function gototoc(){
 i=0;
 prev();
 }

function goto(lc){
 i=lc-1;
 next();
 }
 
function toc(){
 var rv="<div id=bd>";
 var pit="p_itekan";
 pit=eng_to_kur(pit);
 rv+="<a onclick='get_char_grid()'>"+pit+"</a><br>"
 for (var j=1;j<la.length;j++){
 var ta=la[j].split("|");
 if(ta[0]=="") ta[0]="dara dara";
 var t=eng_to_kur(ta[0]);
 var jk=eng_to_kur(j+"");
 tt=jk+". <a onclick='goto("+j+")'>"+t+"</a><br>";
 rv+=tt;
 }
 rv+="</div>";
 rv=rv.replaceAll("+"," ");
 return rv;
 }

document.addEventListener("keydown",event => {
 if (event.key==="ArrowRight") next();
 if (event.key==="ArrowLeft") prev();
 
 if (event.key==="b") load_page();
 if (event.key==="p") play_lesson();
 if (event.key==="s") get_more();
 if (event.key==="l") get_char_grid();
 if (event.key==="t") {rd="t"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}
 if (event.key==="y") {rd="y"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}

 if (event.key==="r") {if(red==0) red=1; else red=0; localStorage.setItem("DARA_LESSON_RED", red); load_page();}

 if (event.key > -1 && event.key < 10){
  i=event.key;
  i++;
  prev();
  }
 });
function highlight(){
  if(red==0) red=1; else red=0;
  localStorage.setItem("DARA_LESSON_RED", red);
  load_page();
  }
function voice(v){
  if(rd=="t") rd="y"; else rd="t";
  localStorage.setItem("DARA_LESSON_VOICE", rd);
  load_page();
  }

function add_tags(t){
 var rv="";
 var wa=t.split(" ");
 var k=0;
 for (j in wa){
   var i0=i.toString();
   var i0=i0.padStart(2,"0");
   var k0=k.toString();
   var k0=k0.padStart(2,"0");
   var w=wa[j];
   var tw="";
   var lc=w.slice(-1);
   if(lc=="."|| lc=="،"|| lc=="!"|| lc=="؟"|| lc=="|") {
     w=w.slice(0,-1);
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a>"+lc+" ";
    } else{
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a> ";
    }
   if(w=="|" || w=="#" || w=="-" || w==" ") tw=w+" ";
   rv+=tw;
   if(w!="|" && w!="#" && w!="-") k++
 }
 var a=rv.split("|");
 var tt="<div id=tt>"+a[0]+"</div>";
 var bd="<div id=bd>"+a[1]+"</div>";
 var cc="<div id=ft><div id=cc>"+a[2]+"</div>"; //<div id=cp><img src='res/p"+i0+".jpg' width=100px></div></div>";
 if(i<3)
 cc="";
 rv=tt+bd+cc;
 rv=rv.replaceAll("#","<br>");
 rv=rv.replaceAll("+"," ");
 var cl=wa[wa.length-1];
 // console.log(red);
 if(red!=0 && i>3){
  rv=rv.replaceAll(cl,"<span class=red>"+cl+"</span>");
  clt=cl.replaceAll("ـ","");
  const al="ا";
  rv=rv.replaceAll(clt+al,"<span class=red>"+clt+"</span>"+al);
  }
 return rv;
 }
 
var timer=0;
var k=0;
function play_lesson(){
  if(timer>0) {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
//    load_page();
    location.reload();
    }
  if(timer==0){
    play_lesson_recursive();
    }
  }
function play_lesson_recursive(){
  load_page();
  var tp=1200; // time play
  document.getElementById("play").innerHTML=PAUSE;
  var wa=get_word_array(la[i]);
  var c=wa.length;
  var kp=0;
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  var k0=k.toString();
  var k0=k0.padStart(2,"0");
  if (k>0) kp=k-1;
  var k1=kp.toString();
  var k1=k1.padStart(2,"0");
  document.getElementById("w"+i0+k1).style.color="";
  document.getElementById("w"+i0+k0).style.color="#f00";
  ps(""+i0+k0);
  var syl=get_sylables(wa[k]);
  if(syl>2) tp=1800;
  console.log(`c:${c}, k:${k}, tp:${tp},${wa[k]}:${timer}`);
  k++;
  if(k<c) timer=setTimeout(play_lesson_recursive, tp); else {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
    location.reload();
    }
  }

function get_sylables(t){
  t=t.replaceAll("ui^","wi^")
  t=t.replaceAll("^","")
  t=t.replaceAll("_","")
  t=t.replaceAll("uu","u")
  t=t.replaceAll("au","aw")
  t=t.replaceAll("ai","ay")
  t=t.replaceAll("oi","oy")
  t=t.replaceAll("ei","ey")
  t=t.replaceAll("ua","wa")
  t=t.replaceAll("ue","we")
  t=t.replaceAll("ia","ya")
  var a=t.split("a").length-1;
  var i=t.split("i").length-1;
  var u=t.split("u").length-1;
  var e=t.split("e").length-1;
  var o=t.split("o").length-1;
  var p=t.split("+").length-1;
  var bn=t.split("bn").length-1;
  var nm=t.split("nm").length-1;
  var nn=t.split("nn").length-1;
//  console.log(t);
  return a+i+e+u+o+p+bn+nm+nn;
  }

function get_word_array(t){
  t=t.replaceAll("|","")
  t=t.replaceAll("#","")
  t=t.replaceAll("-","")
  t=t.replaceAll(".","")
  t=t.replaceAll(",","")
  t=t.replaceAll("?","")
  t=t.replaceAll("   "," ")
  t=t.replaceAll("  "," ")
  var a=t.split(" ");
  return a;
  }

var prev_scroll_pos=window.pageYOffset;
window.onscroll=function() {
 var current_scroll_pos = window.pageYOffset;
 if (prev_scroll_pos > current_scroll_pos) {
 document.getElementById("ftb").style.bottom = "4px";
 } else {
 document.getElementById("ftb").style.bottom = "-50px";
 }
 prev_scroll_pos=current_scroll_pos;
}

function is_mobile() {
  return window.innerHeight > window.innerWidth;
  // return /Android|webOS|iPhone|BlackBerry|IEMobile/i.test(navigator.userAgent);
  }

function eng_to_kur(eng){
 var kur=eng;
 kur=kur.replaceAll("l^","ڵ");
 kur=kur.replaceAll("s^","ش");
 kur=kur.replaceAll("r^","ڕ");
 kur=kur.replaceAll("i^","ێ");
 kur=kur.replaceAll("c^","چ");
 kur=kur.replaceAll("h^","ح");
 kur=kur.replaceAll("`^","غ");
 kur=kur.replaceAll("j","ژ");
 kur=kur.replaceAll("a","ا");
 kur=kur.replaceAll("d","د");
 kur=kur.replaceAll("r","ر");
 kur=kur.replaceAll("u","و");
 kur=kur.replaceAll("i","ی");
 kur=kur.replaceAll("e","ه‌");
 kur=kur.replaceAll("z","ز");
 kur=kur.replaceAll(",","،");
 kur=kur.replaceAll("o","ۆ");
 kur=kur.replaceAll("~","ئ");
 kur=kur.replaceAll("n","ن");
 kur=kur.replaceAll("k","ك");
 kur=kur.replaceAll("_","ـ");
 kur=kur.replaceAll("?","؟");
 kur=kur.replaceAll("m","م");
 kur=kur.replaceAll("b","ب");
 kur=kur.replaceAll("t","ت");
 kur=kur.replaceAll("s","س");
 kur=kur.replaceAll("p","پ");
 kur=kur.replaceAll("g","گ");
 kur=kur.replaceAll("l","ل");
 kur=kur.replaceAll("h","ه");
 kur=kur.replaceAll("q","ق");
 kur=kur.replaceAll("`","ع");
 kur=kur.replaceAll("x","خ");
 kur=kur.replaceAll("c","ج");
 kur=kur.replaceAll("f","ف");
 kur=kur.replaceAll("v","ڤ");
 kur=kur.replaceAll("0","٠");
 kur=kur.replaceAll("1","١");
 kur=kur.replaceAll("2","٢");
 kur=kur.replaceAll("3","٣");
 kur=kur.replaceAll("4","٤");
 kur=kur.replaceAll("5","٥");
 kur=kur.replaceAll("6","٦");
 kur=kur.replaceAll("7","٧");
 kur=kur.replaceAll("8","٨");
 kur=kur.replaceAll("9","٩");
// kur=kur.replaceAll("#","<br>");
 return kur;
 }

</script>
</body>
</html>

<!--
=====
to do
=====
add more pages
add sound
make settings: voice, letter red
add translations

====
done
====
study letter become red
make buttons work
read each word separatly
add buttons for read, next and content
add static firsst lesson
mouseover text color to red
onclick read text
font amiri
responsive designs for portrait and landscape
-->
