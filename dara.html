<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
 font-family: amiri;
 src: url('res/amiri-regular.woff');
}
#pic{
	width:100%;
	}
#txt{
  font-family:amiri;
	font-size:40px;
	width:100%;
	text-align:center;
  direction:rtl;
  line-height:150%;
	}
a:hover{
	color:red;
	cursor:pointer;
	}
#bd{
	text-align:right;
  direction:rtl;
  line-height:150%;
  padding:10px;
	}
#ft{
  border:0px red solid;
  width:100%;
  text-align:left;
  direction:ltr;
  display:flex;
	}
#cp{
	height:40px;
	}
#cc{
  color:#fff;
  background-color:#00f;
  width:150px;
  height:150px;
  border-radius:75px;
  margin:20px;
	font-size:40px;
  line-height:170%;
  text-align: center;
 }
#ftb{
  width:100%;
  text-align:center;
  line-height:150%;
  position:fixed;
  bottom:4px;
  transition: bottom 0.3s;
	}
button{
  width:60px;
  height:40px;
  border-radius:4px;
  border:1px solid #aaa;
 }
button:hover{
  background:#ddd;
  }
	
@media screen and (orientation:landscape) {
	#pic{
		float:left;
		width:50%;
		}
	#txt{
		float:left;
		font-size:100px;
		width:50%;
    line-height:150%;
	  }
 .cc{
    color:#fff;
    background-color:#00f;
    width:200px;
    height:200px;
    border-radius:150px;
    margin:20px;
    font-size:60px;
    line-height:170%;
    text-align: center;
    }
 }
</style>
</head>
<body>
<div id=con>
<div id=pic>
<img id=imageid src="res/p01.jpg" width=100%>
</div>

<div id=txt></div>
</div>
<div style="height:50px;"></div>
<div id=ftb>
<!--
<button>
<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
</button>
-->
 <button onclick="gototoc()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"></path></svg>
 </button>
 <button id=play onclick="play_lesson()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M8 5v14l11-7z"></path></svg>
 </button>
 <button onclick="prev()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
 </button>
 <button onclick="next()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"></path></svg>
 </button>
</div>

<script>
const a=[
 "nauerok||",
 "dar| dar dar dar|",
 "dara| dara dara dara|",
 "| dara dara # dar dar| d # a # r",
 "dar| dara dari di, # dari di dara.| dari+di # i",
 "dau| ui, ui, dau, # daui dara, dau.| dau # u",
 "dara| uere dereue, dara # uere, uere. # dara, uere dereue.| uere # e",
 "duu+dar| dara duu dari di # duu dar, # duu dari duur duur.| duu # uu",
 "uazi| zara, zara # uere uazi. # zuu uere, zuu.| zara # z",
 "do| dade, do, do. # uere dara, uere, # dade doi zore. # dei, zuu uere.| do # o",
 "~au| ~ai, ~ai, #doi dade ~aui zore. #~oi, ~oi, dara, #do ~aui ua zore.| ~au #~_",
 "dade| dade, dade, # uere deri^. # ~eue ~azade, doi deui^. # ~i^, ~i^, dara. # dade ua di^.| deri^ # i^",
 "r^au| zerde, zerde ua r^aue, # dei, dei, # ua ~azad r^oi # ~oi, zerde deuer^i^. # zerde dr^e, # zerde zor zor dr^e.| r^au # r^",
 "do+r^jaue|- ~azad, ~azad, uere juuri^, # ua doi dade r^jaue. # - ~oi, ~eue duu r^oje der^ji^. # duu r^oje doi dade der^ji^.| juur # j",
 "zrize|- ~ai, ~euei zrizei diue, # zrizei ~azad? # - uere, uere, dara, # ~eu zrize ziue zrizei ~azade? # ~ei, ~ei, ~eue zrizei ~azade.| zrize # i_",
 "dari+dri^j| zara, uere ~i^re, # ua ~eu dare dri^je r^uuaue. # dei zara, zuu uere, # ~eu dare dri^je ua r^uuaue.| dri^j # i^_",
 "~audan| zara+u ~azad ua der^on, # ~aui ~eu duu dare deden. # ~eu duu dare zuu der^ui^n, # zuu zuu ~au dedri^n.| ~audan # n",
 "nazi^| daie ~eue neuzade. # ua der^oine nau ~eu darane. # der^oin dar der^ui^nin. # ~oi, nazi^, dar der^ui^nn? # diare ~_i^ue zor ~azan. # zuu uerneue, zuu.| nazi^ # n_",
 "dar+der^ui^_n_m| - daie, ua ~em duu dare der^ui^_n_m, # duai ~eue, ~auian dedem, # - uere nazi^, uere, # ua der^oin, zuu uere # - ua di^_m daie, ua di^_m, # ~em duu dare der^ui^_n_m, # duai ~eue di^_m.| der^ui^_n_m # m",
 "mer^e+zerd| ma, ma, ma, # mame, mame, # ~eme mer^e zerde, # mer^e zerdi mn # mn di^_meue mame. # ua der^om ~aui dedem, # duai ~eue di^_meue.| mer^ # m_",
 "mi^uji+naiab| - ~emeie mi^uj, mi^uji naiab. # - mam zorab, mam zorab, # mer^o, mer^o, mi^ujm deui^. # - zuu uere zeineb, zuu, # dei uere, ~emeie mi^uji naiab.| zeineb # b",
 "bebei+zeineb| zeineb, uere, uere # mame bebei bo narduui. # mame bebei bo narduum? # bji daie, # bji babe, # bji mame.| babe # b_",
 "baran+debari^t| ~ai neuzad, ua baran debari^t. # ~em_r^o ~au zor debi^t. # be baran dar zuu der^ui^t. # bnuar^e mam zorab ua der^uat, # der^uat bo bazar^ mi^uj di^ni^t.| debari^t # t",
 "teiare| bnuar^n, teiare, teiare. # teiarei uatan diue? # ua deibeme nau ~eu darane. # ~euei zuu ditieue, # debi^te teiarei ~eu. # ~azad to detuani zuutr bidoziteue?| teiare # t_",
 "us+be| us, us, dara, bnuar^e ~eu teirane # uis, uis, uis # ~ai, ~ai, ~azad, uere, # ~em teirane bere. # us+be dara, us, uazbi^ne, # bes ~euende ~azari teir bde.| us # s",
 "si^u| ~azad, si^ si^um bo berdeue. # r^aueste nes_rin, ba berneb_meue, # ~i^sta si^ si^uan berdedemeue, # ~eue si^ui^, # ~eue duu si^u, # ~eue si^ si^u, # si^ui dit deui^? # bese, bese, nameui^.| si^u # s_",
 "r^ojbas^| r^ojbas^ babe. # r^ojbas^, nes_rin. # babe ~eue der^oi? # mnis^ bi^m? # nes_rin, ~i^sta bo ~is^ der^om # ~_i^uari^ duai ~is^ di^_meue, # ~eusa der^oin bo dereue.| r^ojbas^ # s^",
 "s^uus^e+s^ir| bnuar^ne ~em s^uus^e s^ire, # s^iri mer^e zerdi mne, # s^iri mer^e zerd s^irine. # uern danis^n, s^uus^ei uatan diue? # ~i^sta der^om dei_s^armeue, # deidem beuei b_idozi^teue.| s^uus^e # s^_",
 "s^er^e+m_ris^k| ~ai babe, bnuar^e, # ua duu m_ris^k s^er^iane # duu m_ris^k uek iek ~azan, # ba tozi^k nisk bem boian # r^aueste, s^er^e denuuk bese. # ~i^sta nisk dedem be ~_i^ue.| m_ris^k # k",
 "keui+mn| daike, daike, # ua tutke suur+u keui mn iari deken. # kut, kut, tutke suur, # nekei ~azari keui mn bdei. # ~ai, ua keui mn tutke suuri r^auna, # keui mn keui^ki ~azaie. # ks^, ks^, keueke, bese uazbi^ne.| keu # k",
"iarii+top| nes_rin, ~eue iek top bo to. # tep, tep, tep. # ~ei top be mn nadei, babe? # neuzad, ~eues^ iek top bo to, bas^e? # bji babe, bji babe, # ~em_r^o duu tip iari dekein, # duu deste iari be iek top dekein.| top # p",
"ps^e+spi| ps^e spi, ps^, ps^, ps^. # miau, miau. # uere pi^s^eue, mer^o. # ~em penir+u nane dedem be to. # miau, miau. # zuu uere, ps^e spi, # to ps^ei mni, netrsi.| ps^e # p_",
"si^+seg| ~ai, neuzad uere. # ua si^ seg iek kerui^s^k r^au deni^n. # prs^ng bang bke, ua bo ~i^re di^n. # deng meke, ba bi^n. # prs^ng, prs^ng, uere seirke. # ua si^ seg iek kerui^s^k r^au deni^n. # zuuke, ua bo ~i^re di^n.| seg # g",
"kare+spi| gdi, gdi, kare spi # to mn nanasi? # g_iat dedemi^ g_ia, netrsi # gdi, gdi, gdi # daie g_ian, kare spi bgre. # r^enge br^uat, zuube. # kare spi, mer^o. # ~em g_iaie dedem be to.| g_ia # g",
"mel| ~ai nesrin, bnuar^e mel. # ua be ~asmanda pol pol der^on. # ~eue iek pol. # ~eue duu pol. # neuzad, r^enge ~euane m_raui bn. # boie ua ml dri^j+u zl zl diarn.| mel # l",
 "blui^r+li^dan| bezme, sema+u strane. # dei ~azad, blui^r li^de seirane. # blui^reke bas^ li^de g_iane. # lem nau l_me sema+u strane. # bji ~azad, bo ~em blui^r li^dane. # dei, dei, boman li^de g_iane.| l_m # l_"
 ];
 
const PAUSE="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#000000'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>";
const PLAY="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='currentColor'><path d='M0 0h24v24H0z' fill='none'></path><path d='M8 5v14l11-7z'></path></svg>";
var i=1;
var rd="t";
if(localStorage.getItem("DARA_LESSON_VOICE")===null) var rd="t"; else rd=localStorage.getItem("DARA_LESSON_VOICE");
window.onload=load_page();

function ps(id){
  var aid="a"+id;
	// document.getElementById(aid).play();
  var audio = new Audio("res/"+rd+"/a"+id+".mp3");
  audio.play();
	}

function next(){
 if(i<a.length) i++;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 }
 
function prev(){
 if(i>0) i--;
 localStorage.setItem("DARA_LESSON_NO", i)
 k=0;
 playing=1;
 load_page()
 }
 
function load_page(){
  if(localStorage.getItem("DARA_LESSON_NO")===null) localStorage.setItem("DARA_LESSON_NO", 1); else i=localStorage.getItem("DARA_LESSON_NO");
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  document.getElementById("imageid").src="res/p" + i0 + ".jpg";
  var t=a[i];
  var ta=t.split("|");
  t=eng_to_kur(t);
  t=add_tags(t);
  if(i==0) t=toc();
  document.getElementById("txt").innerHTML=t;
  const fsa=[40,70,70,60,50,50];
  var fs=40;
  if(i>6) fs=fsa[0]; else fs=fsa[i];
  if(!is_mobile()) fs=fs*1.4;
  document.getElementById("txt").style.fontSize=fs+"px";
  if(i==1 || i==2) document.getElementById("bd").style.textAlign="center";
  if(i==3) {
    document.getElementById("cc").style.lineHeight="30%";
    document.getElementById("w0305").style.lineHeight="100%";
    document.getElementById("w0306").style.lineHeight="160%";
    document.getElementById("w0307").style.lineHeight="30%";
    }
  if(i==4) {
    document.getElementById("cc").style.lineHeight="40%";
    document.getElementById("w0407").style.lineHeight="250%";
    }
  }

function gototoc(){
 i=0;
 prev();
 }

function goto(lc){
 i=lc-1;
 next();
 }
 
function toc(){
 var rv="<div id=bd>";
 for (var j=1;j<a.length;j++){
 var ta=a[j].split("|");
 if(ta[0]=="") ta[0]="dara dara";
 var t=eng_to_kur(ta[0]);
 var jk=eng_to_kur(j+"");
 tt=jk+". <a onclick='goto("+j+")'>"+t+"</a><br>";
 rv+=tt;
 }
 rv+="</div>";
 rv=rv.replaceAll("+"," ");
 return rv;
 }

document.addEventListener("keydown",event => {
 if (event.key==="ArrowRight") next();
 
 if (event.key==="ArrowLeft") prev();

 if (event.key==="p") play_lesson();
 if (event.key==="t") {rd="t"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}
 if (event.key==="y") {rd="y"; load_page(); localStorage.setItem("DARA_LESSON_VOICE", rd);}

 if (event.key > -1 && event.key < 10){
  i=event.key;
  i++;
  prev();
  }
 });

function add_tags(t){
 var rv="";
 var a=t.split(" ");
 var k=0;
 for (j in a){
   var i0=i.toString();
   var i0=i0.padStart(2,"0");
   var k0=k.toString();
   var k0=k0.padStart(2,"0");
   var w=a[j];
   var tw="";
   var lc=w.slice(-1);
   if(lc=="."|| lc=="،"|| lc=="!"|| lc=="؟"|| lc=="|") {
     w=w.slice(0,-1);
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a>"+lc+" ";
    } else{
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a> ";
    }
   if(w=="|" || w=="#" || w=="-" || w==" ") tw=w+" ";
   rv+=tw;
   if(w!="|" && w!="#" && w!="-") k++
 }
 var a=rv.split("|");
 var tt="<div id=tt>"+a[0]+"</div>";
 var bd="<div id=bd>"+a[1]+"</div>";
 var cc="<div id=ft><div id=cc>"+a[2]+"</div>"; //<div id=cp><img src='res/p"+i0+".jpg' width=100px></div></div>";
 if(i<3)
 cc="";
 rv=tt+bd+cc;
 rv=rv.replaceAll("#","<br>");
 rv=rv.replaceAll("+"," ");
 return rv;
 }
 
var timer=0;
var k=0;
function play_lesson(){
  if(timer>0) {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
//    load_page();
    location.reload();
    }
  if(timer==0) {
    play_lesson_recursive();
    }
  }
function play_lesson_recursive(){
  load_page();
  var tp=1200; // time play
  document.getElementById("play").innerHTML=PAUSE;
  var wa=get_word_array(a[i]);
  var c=wa.length;
  var kp=0;
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  var k0=k.toString();
  var k0=k0.padStart(2,"0");
  if (k>0) kp=k-1;
  var k1=kp.toString();
  var k1=k1.padStart(2,"0");
  document.getElementById("w"+i0+k1).style.color="";
  document.getElementById("w"+i0+k0).style.color="#f00";
  ps(""+i0+k0);
  var syl=get_sylables(wa[k]);
  if(syl>2) tp=1800;
  console.log(`c:${c}, k:${k}, tp:${tp},${wa[k]}:${timer}`);
  k++;
  if(k<c) timer=setTimeout(play_lesson_recursive, tp); else {
    clearTimeout(timer);
    k=0;
    document.getElementById("play").innerHTML=PLAY;
    location.reload();
    }
  }

function get_sylables(t){
  t=t.replaceAll("ui^","wi^")
  t=t.replaceAll("^","")
  t=t.replaceAll("uu","u")
  t=t.replaceAll("au","aw")
  t=t.replaceAll("ai","ay")
  t=t.replaceAll("oi","oy")
  t=t.replaceAll("ei","ey")
  t=t.replaceAll("ua","wa")
  t=t.replaceAll("ue","we")
  t=t.replaceAll("ia","ya")
  var a=t.split("a").length-1;
  var i=t.split("i").length-1;
  var u=t.split("u").length-1;
  var e=t.split("e").length-1;
  var o=t.split("o").length-1;
  var p=t.split("+").length-1;
//  console.log(t);
  return a+i+e+u+o+p;
  }

function get_word_array(t){
  t=t.replaceAll("|","")
  t=t.replaceAll("#","")
  t=t.replaceAll("-","")
  t=t.replaceAll(".","")
  t=t.replaceAll(",","")
  t=t.replaceAll("?","")
  t=t.replaceAll("   "," ")
  t=t.replaceAll("  "," ")
  var a=t.split(" ");
  return a;
  }

var prev_scroll_pos=window.pageYOffset;
window.onscroll=function() {
 var current_scroll_pos = window.pageYOffset;
 if (prev_scroll_pos > current_scroll_pos) {
 document.getElementById("ftb").style.bottom = "4px";
 } else {
 document.getElementById("ftb").style.bottom = "-50px";
 }
 prev_scroll_pos=current_scroll_pos;
}

function is_mobile() {
  return window.innerHeight > window.innerWidth;
  // return /Android|webOS|iPhone|BlackBerry|IEMobile/i.test(navigator.userAgent);
  }

function eng_to_kur(eng){
 var kur=eng;
 kur=kur.replaceAll("s^","ش");
 kur=kur.replaceAll("r^","ڕ");
 kur=kur.replaceAll("i^","ێ");
 kur=kur.replaceAll("j","ژ");
 kur=kur.replaceAll("a","ا");
 kur=kur.replaceAll("d","د");
 kur=kur.replaceAll("r","ر");
 kur=kur.replaceAll("u","و");
 kur=kur.replaceAll("i","ی");
 kur=kur.replaceAll("e","ه‌");
 kur=kur.replaceAll("z","ز");
 kur=kur.replaceAll(",","،");
 kur=kur.replaceAll("o","ۆ");
 kur=kur.replaceAll("~","ئ");
 kur=kur.replaceAll("n","ن");
 kur=kur.replaceAll("k","ك");
 kur=kur.replaceAll("_","ـ");
 kur=kur.replaceAll("?","؟");
 kur=kur.replaceAll("m","م");
 kur=kur.replaceAll("b","ب");
 kur=kur.replaceAll("t","ت");
 kur=kur.replaceAll("s","س");
 kur=kur.replaceAll("p","پ");
 kur=kur.replaceAll("g","گ");
 kur=kur.replaceAll("l","ل");
 kur=kur.replaceAll("","");
 kur=kur.replaceAll("","");
 kur=kur.replaceAll("0","٠");
 kur=kur.replaceAll("1","١");
 kur=kur.replaceAll("2","٢");
 kur=kur.replaceAll("3","٣");
 kur=kur.replaceAll("4","٤");
 kur=kur.replaceAll("5","٥");
 kur=kur.replaceAll("6","٦");
 kur=kur.replaceAll("7","٧");
 kur=kur.replaceAll("8","٨");
 kur=kur.replaceAll("9","٩");
// kur=kur.replaceAll("#","<br>");
 return kur;
 }

</script>
</body>
</html>

<!--
=====
to do
=====
add more pages
add sound
make settings
add translation
====
done
====
make buttons work
read each word separatly
add buttons for read, next and content
add static firsst lesson
mouseover text color to red
onclick read text
font amiri
responsive designs for portrait and landscape
-->
