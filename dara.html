<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
 font-family: amiri;
 src: url('res/amiri-regular.woff');
}
#pic{
	width:100%;
	}
#txt{
  font-family:amiri;
	font-size:40px;
	width:100%;
	text-align:center;
  direction:rtl;
  line-height:150%;
	}
a:hover{
	color:red;
	cursor:pointer;
	}
#bd{
	text-align:right;
  direction:rtl;
  line-height:150%;
  padding:10px;
	}
.ft{
  border:0px red solid;
  width:100%;
  text-align:left;
  direction:ltr;
  display:flex;
	}
.cp{
	height:40px;
	}
.cc{
  color:#fff;
  background-color:#00f;
  width:150px;
  height:150px;
  border-radius:75px;
  margin:20px;
	font-size:40px;
  line-height:170%;
  text-align: center;
 }
#ftb{
  width:100%;
  text-align:center;
  line-height:150%;
  position:fixed;
  bottom:4px;
  transition: bottom 0.3s;
	}
button{
  width:60px;
  height:40px;
  border-radius:4px;
  border:1px solid #aaa;
 }
button:hover{
  background:#ddd;
  }
	
@media screen and (orientation:landscape) {
	#pic{
		float:left;
		width:50%;
		}
	#txt{
		float:left;
		font-size:100px;
		width:50%;
    line-height:150%;
	  }
 .cc{
    color:#fff;
    background-color:#00f;
    width:200px;
    height:200px;
    border-radius:150px;
    margin:20px;
    font-size:60px;
    line-height:160%;
    text-align: center;
    }
 }
</style>
</head>
<body>
<div id=con>
<div id=pic>
<img id=imageid src="res/p01.jpg" width=100%>
</div>

<div id=txt></div>
</div>
<div style="height:50px;"></div>
<div id=ftb>
 <button onclick="gototoc()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"></path></svg>
 </button>
 <button id=play onclick="play_lesson()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"></path><path d="M8 5v14l11-7z"></path></svg>
 </button>
 <button onclick="prev()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
 </button>
 <button onclick="next()">
 <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"></path></svg>
 </button>
</div>
<audio id="a0101"><source src="res/a0101.mp3" preload=auto></audio>

<script>
const a=[
 "nauerok|||40",
 "dar| dar dar dar||80",
 "dara| dara dara dara||70",
 "| dara dara # dar dar| d # a # r|60",
 "dar| dara dari di, # dari di dara.| dari+di # i|50",
 "dau| ui, ui, dau, # daui dara, dau.| dau # u|50",
 "dara| uere dereue, dara # uere, uere. # dara, uere dereue.| uere # e|50",
 "duu+dar| dara duu dari di # duu dar, # duu dari duur duur.| duu # uu|40",
 "uazi| zara, zara # uere uazi. # zuu uere, zuu.| zara # z|40",
 "do| dade, do, do. # uere dara, uere, # dade doi zore. # dei, zuu uere,| do # o|40",
 "~au| ~ai, ~ai, #doi dade ~aui zore. #~oi, ~oi, dara, #do ~aui ua zore.| ~au #~_|40",
 "dade| dade, dade, # uere deri^. # ~eue ~azade, doi deui^. # ~i^, ~i^, dara. # dade ua di^.| deri^ # i^|40",
 "r^au| zerde, zerde ua r^aue, # dei, dei, # ua ~azad r^oi # ~oi, zerde deuer^i^. # zerde dr^e, # zerde zor zor dr^e.| r^au # r^|40",
 "do+r^jaue|- ~azad, ~azad, uere juuri^ # ua doi dade r^jaue. # - ~oi, ~eue duu r^oje der^ji^ # duu r^oje doi dade der^ji^.| juur # j|40",
 "zrize|- ~ai, ~euei zrizei diue, # zrizei ~azad? # - uere, uere, dara, # ~eu zrize ziue zrizei ~azade? # ~ei, ~ei, ~eue zrizei ~azade.| zrize # i_ |40",
 "dari+dri^j| zara, uere ~i^re, # ua ~eu dare dri^je r^uuaue. # dei zara, zuu uere, # ~eu dare dri^je ua r^uuaue.| dri^j # i^_|40",
 "~audan| zara+u ~azad ua der^on, # ~aui ~eu duu dare deden. # ~eu duu dare zuu der^ui^n, # zuu zuu ~au dedri^n.| ~audan # n|40",
 "nazi^| daie ~eue neuzade. # ua der^oine nau ~eu darane. # der^oin dar der^ui^nin. # ~oi, nazi^, dar der^ui^nn? # diare ~_i^ue zor ~azan. # zuu uerneue, zuu.| nazdar # n_|40",
 "dar+der^ui^nm| - daie, ua ~em duu dare der^ui^nm, # duai ~eue, ~auian dedem, # - uere nazi^, uere, # ua der^oin, zuu uere # - ua di^m daie, ua di^m, # ~em duu dare der^ui^nm, # duai ~eue di^m| der^ui^nm # m|40",
 "mer^e+zerd| ma, ma, ma, # mame, mame, # ~eme mer^e zerde, # mer^e zerdi mn # mn di^_meue mame. # ua der^om ~aui dedem, # duai ~eue di^_meue,| mer^ # m_|40",
 "mi^uji+naiab| - ~emeie mi^uj, mi^uji naiab. # - mam zorab, mam zorab, # mer^o, mer^o, mi^ujm deui^. # - zuu uere zeineb, zuu, # dei uere, ~emeie mi^uji naiab| zeineb # b|40",
 "bebei+zeineb| zeineb, uere, uere # mame bebei bo narduui. # mame bebei bo narduum? # bji daie, # bji babe, # bji mame.| babe # b_|40",
 "baran+debari^t| ~ai neuzad, ua baran debari^t, # ~em_r^o ~au zor debi^t, # be baran dar zuu der^ui^t, # bnuar^e mam zorab, ua der^uat # der^uat bo bazar^, mi^uj di^ni^t| debari^t # t|40",
 "teiare| bnuar^n, teiare, teiare. # teiarei uatan diue? # ua deibeme nau ~eu darane. # ~euei zuu ditieue, # debi^te teiarei ~eu. # ~azad to detuani zuutr bidoziteue?| teiare # t_|40",
 "uus+be| uus, uus, dara, bnuar^e ~eu teirane # uis, uis, uis # ~ai, ~ai, ~azad, uere, # ~em teirane bere. # uus+be dara, uus, uazbi^ne, # bes ~euende ~azari teir bde.| us # s|40",
 "si^u| ~azad, si^ si^um bo berdeue. # r^aueste nes_rin, ba berneb_meue, # ~i^sta si^ si^uan berdedemeue, # ~eue si^ui^, # ~eue duu si^u, # ~eue si^ si^u, # si^ui dit deui^? # bese, bese, nameui^| si^u # s_|40",
 "r^ojbas^| r^ojbas^ babe. # r^ojbas^, nes_rin. # babe ~eue der^oi? # mnis^ bi^m? # nes_rin, ~i^sta bo ~is^ der^om # ~_i^uari^ duai ~is^ di^_meue, # ~eusa der^oin bo dereue.| r^ojbas^ # s^|40",
 "s^uus^e+s^ir| bnuar^e ~em s^uus^e s^ire, # s^iri mer^e zerdi mne, # s^iri mer^e zerd s^irine. # uern danis^n, s^uus^ei uatan diue? # ~i^sta der^om dei_s^armeue, # deidem beuei b_idozi^teue.| s^uus^e # s^_|40",
 "s^er^e+m_ris^k| ~ai babe, bnuar^e, # ua duu m_ris^k s^er^iane # duu m_ris^k uek iek ~azan, # ba tozi^k nisk bem boian # r^aueste, s^er^e denuuk bese. # ~i^sta nisk dedem be ~_i^ue.| m_ris^k # k|40",
 "keui+mn| daike, daike, # ua tutke suur+u keui mn iari deken. # kut, kut, tutke suur, # nekei ~azari keui mn bdei. # ~ai, ua keui mn tutke suuri r^auna, # keui mn keui^ki ~azaie. # ks^, ks^, keueke, bese uazbi^ne.| keu # k|40",
"iarii+top| nes_rin, ~eue iek top bo to. # tep, tep, tep. # ~ei top be mn nadei, babe? # neuzad, ~eues^ iek top bo to, bas^e? # bji babe, bji babe, # ~em_r^o duu tip iari dekein, # duu deste iari be iek top dekein.| top # p|40",
"ps^e+spi| ps^e spi, ps^, ps^, ps^. # miau, miau. # uere pi^s^eue, mer^o. # ~em penir+u nane dedem be to. # miau, miau. # zuu uere, ps^e spi, # to ps^ei mni, netrsi.| ps^e # p_"
 ];
const PAUSE="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='#000000'><path d='M0 0h24v24H0V0z' fill='none'/><path d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/></svg>";
const PLAY="<svg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='currentColor'><path d='M0 0h24v24H0z' fill='none'></path><path d='M8 5v14l11-7z'></path></svg>";
var i=1;
window.onload=load_page();

function ps(id){
  var aid="a"+id;
	document.getElementById(aid).play();
	}

function next(){
 if(i<a.length) i++;
 load_page()
 }
 
function prev(){
 if(i>0) i--;
 load_page()
 }
 
function load_page(){
  var i0=i.toString();
  var i0=i0.padStart(2,"0");
  document.getElementById("imageid").src="res/p" + i0 + ".jpg";
  var t=a[i];
  var ta=t.split("|");
  t=eng_to_kur(t);
  t=add_tags(t);
  if(i==0) t=toc();
  document.getElementById("txt").innerHTML=t;
  var fs=ta[3];
  if(!is_mobile()) fs=fs*1.4;
  console.log(is_mobile())
  document.getElementById("txt").style.fontSize=fs+"px";
  if(i==1 || i==2 ) document.getElementById("bd").style.textAlign="center";
  }

function gototoc(){
 i=0;
 prev();
 }

function goto(lc){
 i=lc-1;
 next();
 }
 
function toc(){
 var rv="<div id=bd>";
 for (var j=1;j<a.length;j++){
 var ta=a[j].split("|");
 if(ta[0]=="") ta[0]="dara dara";
 var t=eng_to_kur(ta[0]);
 var jk=eng_to_kur(j+"");
 tt=jk+". <a onclick='goto("+j+")'>"+t+"</a><br>";
 rv+=tt;
 }
 rv+="</div>";
 rv=rv.replaceAll("+"," ");
 return rv;
 }

document.addEventListener("keydown",event => {
 if (event.key==="ArrowRight"){
 next();
 }
 
 if (event.key==="ArrowLeft"){
 prev();
 }

 if (event.key > -1 && event.key < 10){
 i=event.key;
 i++;
 prev();
 }
 });

function add_tags(t){
 var rv="";
 var a=t.split(" ");
 var k=0;
 console.log(a);
 for (j in a){
   var i0=i.toString();
   var i0=i0.padStart(2,"0");
   var k0=k.toString();
   var k0=k0.padStart(2,"0");
   var w=a[j];
   var tw="";
   var lc=w.slice(-1);
   if(lc=="."|| lc=="،"|| lc=="!"|| lc=="؟"|| lc=="|") {
     w=w.slice(0,-1);
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a>"+lc+" ";
    } else{
     tw="<a id=w"+i0+k0+" onclick=ps('"+i0+k0+"')>"+w+"</a> ";
    }
   console.log(`j:${j}, k:${k}, w:${w}:`);
   if(w=="|" || w=="#" || w=="-" || w==" ") tw=w+" ";
   rv+="<audio id=a"+i0+k0+"><source src=res/t/a"+i0+k0+".mp3 preload=auto></audio>"
   rv+=tw;
   if(w!="|" && w!="#" && w!="-") k++
 }
 var a=rv.split("|");
 var tt="<div class=tt>"+a[0]+"</div>";
 var bd="<div id=bd>"+a[1]+"</div>";
 var cc="<div class=ft><div class=cc>"+a[2]+"</div>"; //<div class=cp><img src='res/p"+i0+".jpg' width=100px></div></div>";
 if(i<3)
 cc="";
 rv=tt+bd+cc;
 rv=rv.replaceAll("#","<br>");
 rv=rv.replaceAll("+"," ");
 return rv;
 }
 
var playing=0;
function play_lesson(){
  if(playing==0){
    document.getElementById("play").innerHTML=PAUSE;
    var c=get_word_count(a[i]);
    var k=0;
    var kp=0;
    var timer=setInterval(function(){
      playing=1;
      var i0=i.toString();
      var i0=i0.padStart(2,"0");
      var k0=k.toString();
      var k0=k0.padStart(2,"0");
      if (k>0) kp=k-1;
      var k1=kp.toString();
      var k1=k1.padStart(2,"0");
      if(k<c) {
        document.getElementById("w"+i0+k1).style.color="";
        document.getElementById("w"+i0+k0).style.color="#f00";
        ps(""+i0+k0);
        }
      if(k==c) {
        clearInterval(timer);
        playing=0;
        document.getElementById("play").innerHTML=PLAY;
        }
      console.log(`c:${c}, k:${k}, timer:${timer}`);
      k++;
      }, 1300);
    }
  }

function get_word_count(t){
  var rv=0;
  t=t.replaceAll("|","")
  t=t.replaceAll("#","")
  t=t.replaceAll("  "," ")
  var a=t.split(" ");
  rv=a.length;
  return rv;
  }

var prev_scroll_pos=window.pageYOffset;
window.onscroll=function() {
 var current_scroll_pos = window.pageYOffset;
 if (prev_scroll_pos > current_scroll_pos) {
 document.getElementById("ftb").style.bottom = "4px";
 } else {
 document.getElementById("ftb").style.bottom = "-50px";
 }
 prev_scroll_pos=current_scroll_pos;
}

function is_mobile() {
  return window.innerHeight > window.innerWidth;
  // return /Android|webOS|iPhone|BlackBerry|IEMobile/i.test(navigator.userAgent);
  }

function eng_to_kur(eng){
 var kur=eng;
 kur=kur.replaceAll("s^","ش");
 kur=kur.replaceAll("r^","ڕ");
 kur=kur.replaceAll("i^","ێ");
 kur=kur.replaceAll("j","ژ");
 kur=kur.replaceAll("a","ا");
 kur=kur.replaceAll("d","د");
 kur=kur.replaceAll("r","ر");
 kur=kur.replaceAll("u","و");
 kur=kur.replaceAll("i","ی");
 kur=kur.replaceAll("e","ه‌");
 kur=kur.replaceAll("z","ز");
 kur=kur.replaceAll(",","،");
 kur=kur.replaceAll("o","ۆ");
 kur=kur.replaceAll("~","ئ");
 kur=kur.replaceAll("n","ن");
 kur=kur.replaceAll("k","ك");
 kur=kur.replaceAll("_","ـ");
 kur=kur.replaceAll("?","؟");
 kur=kur.replaceAll("m","م");
 kur=kur.replaceAll("b","ب");
 kur=kur.replaceAll("t","ت");
 kur=kur.replaceAll("s","س");
 kur=kur.replaceAll("p","پ");
 kur=kur.replaceAll("","");
 kur=kur.replaceAll("0","٠");
 kur=kur.replaceAll("1","١");
 kur=kur.replaceAll("2","٢");
 kur=kur.replaceAll("3","٣");
 kur=kur.replaceAll("4","٤");
 kur=kur.replaceAll("5","٥");
 kur=kur.replaceAll("6","٦");
 kur=kur.replaceAll("7","٧");
 kur=kur.replaceAll("8","٨");
 kur=kur.replaceAll("9","٩");
// kur=kur.replaceAll("#","<br>");
 return kur;
 }

</script>
</body>
</html>

<!--
=====
to do
=====
add more pages
add sound
make buttons work
====
done
====
read each word separatly
add buttons for read, next and content
add static firsst lesson
mouseover text color to red
onclick read text
font amiri
responsive designs for portrait and landscape
-->
